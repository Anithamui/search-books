{"version":3,"sources":["reportWebVitals.js","Book.js","SearchBooks.js","index.js"],"names":["reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","Book","props","book","title","first_publish_year","cover_i","author_name","class","src","alt","length","join","SearchBooks","useState","searchText","setSearchText","prevSearchText","setPrevSearchText","results","setResults","sortFilter","setSortFilter","queryString","setQueryString","history","useHistory","location","useLocation","useEffect","push","QS","parse","search","q","sortBy","fetch","res","json","result","docs","error","console","log","_results","sort","a","b","localeCompare","Date","getTime","onSubmit","e","preventDefault","stringify","name","type","value","onChange","target","map","index","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5408df8e.chunk.js","sourcesContent":["const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\r\n\r\nconst Book = (props) => {\r\n  const { title, first_publish_year, cover_i, author_name } = props.book;\r\n\r\n  return (\r\n    <div class=\"results-container\">\r\n      <div class=\"result-image\">\r\n        <img\r\n          src={cover_i ?`http://covers.openlibrary.org/b/id/${cover_i}-M.jpg`\r\n\t\t  : 'https://www.adazing.com/wp-content/uploads/2019/02/open-book-clipart-04-300x300.png'\r\n\t\t}\t  \r\n          \r\n          alt=\"No Cover Found\"\r\n        />\r\n      </div>\r\n      <div class=\"result-info\">\r\n        <h4>{title}</h4>\r\n        <p>\r\n          {first_publish_year && `First Published in : ${first_publish_year}`}\r\n        </p>\r\n        <p> {author_name && author_name.length > 0 && `By ${author_name.join()}`} </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Book;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport QS from \"query-string\";\r\nimport { useHistory, useLocation } from \"react-router\";\r\nimport Book from \"./Book\";\r\nimport \"./App.css\";\r\nconst SearchBooks = () => {\r\n  const [searchText, setSearchText] = useState(\"\");\r\n  const [prevSearchText, setPrevSearchText] = useState(\"prevText\");\r\n  const [results, setResults] = useState([]);\r\n  const [sortFilter, setSortFilter] = useState(\"\");\r\n  const [queryString, setQueryString] = useState(\"\");\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n\r\n  const handleSearch = (e) => {\r\n    e.preventDefault();\r\n    if (!searchText) return;\r\n    setQueryString(QS.stringify({ q: searchText, sortBy: sortFilter }));\r\n  };\r\n\r\n  const handleSortFilterChange = (e) => {\r\n    if (e.target.value === \"title\") {\r\n      setQueryString(QS.stringify({ q: searchText, sortBy: \"title\" }));\r\n    } else if (e.target.value === \"publishDate\") {\r\n      setQueryString(QS.stringify({ q: searchText, sortBy: \"publishDate\" }));\r\n    } else setQueryString(QS.stringify({ q: searchText, sortBy: \"\" }));\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (queryString) history.push(`/search-books/?${queryString}`);\r\n  }, [history, queryString]);\r\n\r\n  useEffect(() => {\r\n    const { q, sortBy } = QS.parse(location.search);\r\n    // Don't call if the search text is same\r\n    if (q && q !== prevSearchText) {\r\n      setSearchText(q);\r\n\r\n      fetch(`https://openlibrary.org/search.json?title=${q}`)\r\n        .then((res) => res.json())\r\n        .then(\r\n          (result) => {\r\n            setResults(result.docs ? result.docs : []);\r\n            setPrevSearchText(q);\r\n          },\r\n          (error) => {\r\n            console.log(error);\r\n          }\r\n        );\r\n    }\r\n\r\n    setSortFilter(sortBy);\r\n    if (sortBy) {\r\n      const _results = [...results];\r\n      if (sortBy === \"title\") {\r\n        _results.sort((a, b) => a.title.localeCompare(b.title));\r\n        setResults(_results);\r\n      } else if (sortBy === \"publishDate\") {\r\n        _results.sort(\r\n          (a, b) =>\r\n            new Date(a.first_publish_year).getTime() -\r\n            new Date(b.first_publish_year).getTime()\r\n        );\r\n        setResults(_results);\r\n      }\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [location.search, prevSearchText]);\r\n\r\n  return (\r\n    <div>\r\n      <div class='header-container'>\r\n       <div class='title-item'> <h1>Search Books</h1></div> \r\n        <div class='input-item'>\r\n          <form onSubmit={handleSearch}>\r\n            <input\r\n              name=\"search\"\r\n              type=\"text\"\r\n              value={searchText}\r\n              onChange={(e) => setSearchText(e.target.value)}\r\n            />\r\n            <button type=\"submit\" name=\"searchButton\">\r\n              Search\r\n            </button>\r\n\r\n            <label>\r\n              Sort By :  \r\n              <select value={sortFilter} onChange={handleSortFilterChange}>\r\n                <option value=\"\"></option>\r\n                <option value=\"title\">Book Title</option>\r\n                <option value=\"publishDate\">Book First Published Year</option>\r\n              </select>\r\n            </label>\r\n          </form>\r\n        </div>\r\n      </div>\r\n      <div >\r\n        {results.length > 0 &&\r\n          results.map((b, index) => <Book key={index} book={b}></Book>)}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SearchBooks;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport SearchBooks from \"./SearchBooks\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<Router>\n\t\t\t<SearchBooks />\n\t\t</Router>\n\t</React.StrictMode>,\n\tdocument.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}